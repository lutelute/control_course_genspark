<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¬¬3å›ï¼šçŠ¶æ…‹æ–¹ç¨‹å¼ã®è§£</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.8;
            color: #333;
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
            padding: 20px;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        header {
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }
        h1 { font-size: 2.5em; margin-bottom: 10px; }
        .subtitle { font-size: 1.2em; opacity: 0.9; }
        .content { padding: 40px; }
        h2 {
            color: #43e97b;
            margin-top: 30px;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 3px solid #43e97b;
        }
        h3 { color: #38f9d7; margin-top: 25px; margin-bottom: 10px; }
        .highlight-box {
            background: #e8f5e9;
            border-left: 5px solid #43e97b;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }
        .interactive-demo {
            background: #f0f8ff;
            border: 2px solid #4169e1;
            padding: 25px;
            margin: 25px 0;
            border-radius: 10px;
        }
        button {
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            font-size: 1em;
            border-radius: 25px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            margin: 10px 5px;
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(67, 233, 123, 0.4);
        }
        canvas {
            border: 2px solid #ddd;
            border-radius: 5px;
            display: block;
            margin: 20px auto;
            background: white;
        }
        .formula {
            background: #f9f9f9;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
            overflow-x: auto;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: center;
        }
        th {
            background: #43e97b;
            color: white;
        }
        tr:nth-child(even) { background: #f9f9f9; }
        .slider-container { margin: 15px 0; }
        input[type="range"] { width: 100%; margin: 10px 0; }
        .value-display {
            font-family: 'Courier New', monospace;
            background: #263238;
            color: #aed581;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
        }
        ul { margin-left: 30px; margin-top: 10px; }
        li { margin: 8px 0; }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ“ ç¬¬3å›ï¼šçŠ¶æ…‹æ–¹ç¨‹å¼ã®è§£</h1>
            <p class="subtitle">Solution of State Equations</p>
        </header>
        
        <div class="content">
            <div class="highlight-box">
                <h3>ğŸ¯ å­¦ç¿’ç›®æ¨™</h3>
                <ul>
                    <li>ç·šå½¢æ™‚ä¸å¤‰ã‚·ã‚¹ãƒ†ãƒ ã®çŠ¶æ…‹æ–¹ç¨‹å¼ã®è§£æ³•ã‚’ç†è§£ã™ã‚‹</li>
                    <li>çŠ¶æ…‹é·ç§»è¡Œåˆ—ã®æ¦‚å¿µã¨æ„å‘³ã‚’æŠŠæ¡ã™ã‚‹</li>
                    <li>åˆæœŸå€¤å¿œç­”ã¨å¼·åˆ¶å¿œç­”ã®é–¢ä¿‚ã‚’å­¦ã¶</li>
                </ul>
            </div>

            <h2>1. çŠ¶æ…‹æ–¹ç¨‹å¼ã®ä¸€èˆ¬è§£</h2>
            
            <div class="formula">
                <h3>ç·šå½¢æ™‚ä¸å¤‰ã‚·ã‚¹ãƒ†ãƒ ã®è§£</h3>
                <p>$$\mathbf{x}(t) = e^{\mathbf{A}t}\mathbf{x}_0 + \int_0^t e^{\mathbf{A}(t-\tau)}\mathbf{B}\mathbf{u}(\tau)d\tau$$</p>
                <p style="margin-top: 15px;">
                    <strong>ç¬¬1é …ï¼š</strong>åˆæœŸå€¤å¿œç­”ï¼ˆè‡ªç”±å¿œç­”ï¼‰<br>
                    <strong>ç¬¬2é …ï¼š</strong>å¼·åˆ¶å¿œç­”ï¼ˆå…¥åŠ›å¿œç­”ï¼‰
                </p>
            </div>

            <h2>2. ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ‡ãƒ¢ï¼šçŠ¶æ…‹é·ç§»è¡Œåˆ—ã®å¯è¦–åŒ–</h2>
            
            <div class="interactive-demo">
                <h3>ğŸ”§ ã‚·ã‚¹ãƒ†ãƒ è¡Œåˆ—ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿</h3>
                
                <p>2Ã—2ã‚·ã‚¹ãƒ†ãƒ : \(\mathbf{A} = \begin{bmatrix} a_{11} & a_{12} \\ a_{21} & a_{22} \end{bmatrix}\)</p>
                
                <div class="slider-container">
                    <label>aâ‚â‚: <span id="a11-value">-1.0</span></label>
                    <input type="range" id="a11-slider" min="-3" max="1" step="0.1" value="-1">
                </div>
                
                <div class="slider-container">
                    <label>aâ‚â‚‚: <span id="a12-value">1.0</span></label>
                    <input type="range" id="a12-slider" min="-2" max="2" step="0.1" value="1">
                </div>
                
                <div class="slider-container">
                    <label>aâ‚‚â‚: <span id="a21-value">0.0</span></label>
                    <input type="range" id="a21-slider" min="-2" max="2" step="0.1" value="0">
                </div>
                
                <div class="slider-container">
                    <label>aâ‚‚â‚‚: <span id="a22-value">-2.0</span></label>
                    <input type="range" id="a22-slider" min="-3" max="1" step="0.1" value="-2">
                </div>

                <div class="slider-container">
                    <label>åˆæœŸçŠ¶æ…‹ xâ‚(0): <span id="x1-value">1.0</span></label>
                    <input type="range" id="x1-slider" min="-2" max="2" step="0.1" value="1">
                </div>

                <div class="slider-container">
                    <label>åˆæœŸçŠ¶æ…‹ xâ‚‚(0): <span id="x2-value">1.0</span></label>
                    <input type="range" id="x2-slider" min="-2" max="2" step="0.1" value="1">
                </div>
                
                <button onclick="simulateResponse()">ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ</button>
                <button onclick="resetDemo()">ãƒªã‚»ãƒƒãƒˆ</button>
                
                <div class="value-display">
                    <h4>å›ºæœ‰å€¤:</h4>
                    <pre id="eigenvalues"></pre>
                </div>
                
                <canvas id="response-canvas" width="800" height="400"></canvas>
            </div>

            <h2>3. è¡Œåˆ—æŒ‡æ•°é–¢æ•°ã®æ€§è³ª</h2>
            
            <table>
                <tr>
                    <th>æ€§è³ª</th>
                    <th>å¼</th>
                </tr>
                <tr>
                    <td>åˆæœŸæ¡ä»¶</td>
                    <td>\(e^{\mathbf{A} \cdot 0} = \mathbf{I}\)</td>
                </tr>
                <tr>
                    <td>å¾®åˆ†</td>
                    <td>\(\frac{d}{dt}e^{\mathbf{A}t} = \mathbf{A}e^{\mathbf{A}t}\)</td>
                </tr>
                <tr>
                    <td>åŠ æ³•æ€§</td>
                    <td>\(e^{\mathbf{A}(t_1+t_2)} = e^{\mathbf{A}t_1}e^{\mathbf{A}t_2}\)</td>
                </tr>
                <tr>
                    <td>é€†è¡Œåˆ—</td>
                    <td>\((e^{\mathbf{A}t})^{-1} = e^{-\mathbf{A}t}\)</td>
                </tr>
            </table>

            <h2>4. ã¾ã¨ã‚</h2>
            <div class="highlight-box">
                <ul>
                    <li>çŠ¶æ…‹æ–¹ç¨‹å¼ã®è§£ã¯åˆæœŸå€¤å¿œç­”ã¨å¼·åˆ¶å¿œç­”ã®å’Œ</li>
                    <li>çŠ¶æ…‹é·ç§»è¡Œåˆ— \(e^{\mathbf{A}t}\) ãŒæ™‚é–“ç™ºå±•ã‚’è¨˜è¿°</li>
                    <li>å›ºæœ‰å€¤ãŒè² ãªã‚‰çŠ¶æ…‹ã¯æ¸›è¡°ã€æ­£ãªã‚‰ç™ºæ•£</li>
                    <li>è¡Œåˆ—æŒ‡æ•°é–¢æ•°ã®è¨ˆç®—ã«ã¯è¤‡æ•°ã®æ–¹æ³•ãŒã‚ã‚‹</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        // ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã®å€¤ã‚’æ›´æ–°
        ['a11', 'a12', 'a21', 'a22', 'x1', 'x2'].forEach(id => {
            document.getElementById(id + '-slider').addEventListener('input', function() {
                document.getElementById(id + '-value').textContent = this.value;
            });
        });

        function simulateResponse() {
            const a11 = parseFloat(document.getElementById('a11-slider').value);
            const a12 = parseFloat(document.getElementById('a12-slider').value);
            const a21 = parseFloat(document.getElementById('a21-slider').value);
            const a22 = parseFloat(document.getElementById('a22-slider').value);
            const x1_0 = parseFloat(document.getElementById('x1-slider').value);
            const x2_0 = parseFloat(document.getElementById('x2-slider').value);
            
            // å›ºæœ‰å€¤è¨ˆç®—
            const trace = a11 + a22;
            const det = a11 * a22 - a12 * a21;
            const discriminant = trace * trace - 4 * det;
            
            let eigentext = '';
            if (discriminant >= 0) {
                const lambda1 = (trace + Math.sqrt(discriminant)) / 2;
                const lambda2 = (trace - Math.sqrt(discriminant)) / 2;
                eigentext = `Î»â‚ = ${lambda1.toFixed(3)}\nÎ»â‚‚ = ${lambda2.toFixed(3)}`;
            } else {
                const real = trace / 2;
                const imag = Math.sqrt(-discriminant) / 2;
                eigentext = `Î»â‚ = ${real.toFixed(3)} + ${imag.toFixed(3)}j\nÎ»â‚‚ = ${real.toFixed(3)} - ${imag.toFixed(3)}j`;
            }
            document.getElementById('eigenvalues').textContent = eigentext;
            
            // ã‚­ãƒ£ãƒ³ãƒã‚¹æç”»
            const canvas = document.getElementById('response-canvas');
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // è»¸ã®æç”»
            drawAxes(ctx, canvas.width, canvas.height);
            
            // ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
            const dt = 0.01;
            const tMax = 5;
            const steps = tMax / dt;
            
            let x1 = x1_0;
            let x2 = x2_0;
            
            const scaleX = (canvas.width - 100) / tMax;
            const scaleY = 100;
            const offsetY = canvas.height / 2;
            
            // x1ã®æç”»
            ctx.strokeStyle = '#ff6b6b';
            ctx.lineWidth = 2;
            ctx.beginPath();
            
            for (let i = 0; i < steps; i++) {
                const t = i * dt;
                const x = 50 + t * scaleX;
                const y = offsetY - x1 * scaleY;
                
                if (i === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
                
                // ã‚ªã‚¤ãƒ©ãƒ¼æ³•
                const dx1 = a11 * x1 + a12 * x2;
                const dx2 = a21 * x1 + a22 * x2;
                x1 += dx1 * dt;
                x2 += dx2 * dt;
            }
            ctx.stroke();
            
            // å‡¡ä¾‹
            ctx.fillStyle = '#ff6b6b';
            ctx.font = '14px Arial';
            ctx.fillText('xâ‚(t)', canvas.width - 80, 30);
        }

        function drawAxes(ctx, width, height) {
            const offsetY = height / 2;
            
            ctx.strokeStyle = '#ccc';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(50, 20);
            ctx.lineTo(50, height - 20);
            ctx.stroke();
            
            ctx.beginPath();
            ctx.moveTo(50, offsetY);
            ctx.lineTo(width - 20, offsetY);
            ctx.stroke();
            
            ctx.fillStyle = '#666';
            ctx.font = '12px Arial';
            ctx.fillText('0', 35, offsetY + 20);
            ctx.fillText('t', width - 40, offsetY + 20);
            ctx.fillText('x', 25, 30);
        }

        function resetDemo() {
            document.getElementById('a11-slider').value = -1;
            document.getElementById('a12-slider').value = 1;
            document.getElementById('a21-slider').value = 0;
            document.getElementById('a22-slider').value = -2;
            document.getElementById('x1-slider').value = 1;
            document.getElementById('x2-slider').value = 1;
            
            ['a11', 'a12', 'a21', 'a22', 'x1', 'x2'].forEach(id => {
                document.getElementById(id + '-value').textContent = 
                    document.getElementById(id + '-slider').value;
            });
            
            simulateResponse();
        }

        // åˆæœŸåŒ–
        simulateResponse();
    </script>
</body>
</html>